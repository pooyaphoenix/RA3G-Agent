2025-11-03 14:21:04,362 - INFO - Calling Ollama (streaming) at http://localhost:11434/api/generate
2025-11-03 14:22:05,034 - ERROR - Ollama call failed: 
Traceback (most recent call last):
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 136, in handle_async_request
    raise exc
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_backends\anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\app\agents\reasoning_agent.py", line 90, in reason
    raw = await self._call_ollama(prompt)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\app\agents\reasoning_agent.py", line 51, in _call_ollama
    async with client.stream("POST", self.ollama_url, json=payload) as resp:
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1583, in stream
    response = await self.send(
               ^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout
2025-11-03 14:25:02,978 - INFO - ReasoningAgent initialized (model=llama3.1:latest, url=http://localhost:11434/api/generate)
2025-11-03 14:25:08,523 - INFO - Calling Ollama (streaming) at http://localhost:11434/api/generate
2025-11-03 14:26:09,331 - ERROR - Ollama call failed: 
Traceback (most recent call last):
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 136, in handle_async_request
    raise exc
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_backends\anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\app\agents\reasoning_agent.py", line 90, in reason
    raw = await self._call_ollama(prompt)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\app\agents\reasoning_agent.py", line 51, in _call_ollama
    async with client.stream("POST", self.ollama_url, json=payload) as resp:
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1583, in stream
    response = await self.send(
               ^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout
2025-11-03 14:26:56,955 - INFO - ReasoningAgent initialized (model=llama3.1:latest, url=http://localhost:11434/api/generate)
2025-11-03 14:27:04,156 - INFO - Calling Ollama (streaming) at http://localhost:11434/api/generate
2025-11-03 14:28:05,527 - ERROR - Ollama call failed: 
Traceback (most recent call last):
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 136, in handle_async_request
    raise exc
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_backends\anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\app\agents\reasoning_agent.py", line 90, in reason
    raw = await self._call_ollama(prompt)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\app\agents\reasoning_agent.py", line 51, in _call_ollama
    async with client.stream("POST", self.ollama_url, json=payload) as resp:
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1583, in stream
    response = await self.send(
               ^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout
2025-11-03 14:29:40,973 - INFO - Calling Ollama (streaming) at http://localhost:11434/api/generate
2025-11-03 14:30:41,665 - ERROR - Ollama call failed: 
Traceback (most recent call last):
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 136, in handle_async_request
    raise exc
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_backends\anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\app\agents\reasoning_agent.py", line 90, in reason
    raw = await self._call_ollama(prompt)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\app\agents\reasoning_agent.py", line 51, in _call_ollama
    async with client.stream("POST", self.ollama_url, json=payload) as resp:
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1583, in stream
    response = await self.send(
               ^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout
2025-11-03 14:31:28,847 - INFO - Calling Ollama (streaming) at http://localhost:11434/api/generate
2025-11-03 14:32:29,627 - ERROR - Ollama call failed: 
Traceback (most recent call last):
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 136, in handle_async_request
    raise exc
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_async\http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_backends\anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\app\agents\reasoning_agent.py", line 90, in reason
    raw = await self._call_ollama(prompt)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\app\agents\reasoning_agent.py", line 51, in _call_ollama
    async with client.stream("POST", self.ollama_url, json=payload) as resp:
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1583, in stream
    response = await self.send(
               ^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "C:\Users\pooya\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\pooya\OneDrive\Desktop\pro\policy-aware-rag-agent\venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout
2025-11-03 14:36:27,170 - INFO - ReasoningAgent initialized (model=llama3.1:latest, url=http://localhost:11434/api/generate)
2025-11-03 14:36:42,219 - INFO - Calling Ollama (streaming) at http://localhost:11434/api/generate
2025-11-03 14:38:54,561 - INFO - Raw LLM output length: 271
2025-11-03 14:38:54,562 - INFO - Reasoning completed for query 'how many bones we have?'
2025-11-03 14:47:28,773 - INFO - Calling Ollama (streaming) at http://localhost:11434/api/generate
2025-11-03 14:49:33,775 - INFO - Raw LLM output length: 69
2025-11-03 14:49:33,776 - INFO - Reasoning completed for query 'Previous context:
[MEMORY 0] Q: how many bones we have? | A: 206

New Query:
who is John Smith?'
2025-11-03 14:51:34,888 - INFO - Calling Ollama (streaming) at http://localhost:11434/api/generate
2025-11-03 14:53:44,848 - INFO - Raw LLM output length: 213
2025-11-03 14:53:44,848 - INFO - Reasoning completed for query 'Previous context:
[MEMORY 0] Q: how many bones we have? | A: 206
[MEMORY 1] Q: who is John Smith? | A: No answer found

New Query:
Medical information must be shared only with who?'
2025-11-03 15:06:55,756 - INFO - Calling Ollama (streaming) at http://localhost:11434/api/generate
2025-11-03 15:09:23,912 - INFO - Raw LLM output length: 456
2025-11-03 15:09:23,913 - INFO - Reasoning completed for query 'Previous context:
[MEMORY 0] Q: how many bones we have? | A: 206
[MEMORY 1] Q: who is John Smith? | A: No answer found
[MEMORY 2] Q: Medical information must be shared only with who? | A: patient consent

New Query:
tell me Dr. Robert Wilson informations'
2025-11-03 15:26:20,853 - INFO - ReasoningAgent initialized (model=llama3.1:latest, url=http://localhost:11434/api/generate)
2025-11-03 15:27:25,501 - INFO - Calling Ollama (streaming) at http://localhost:11434/api/generate
2025-11-03 15:28:49,309 - INFO - Raw LLM output length: 243
2025-11-03 15:28:49,310 - INFO - Reasoning completed for query 'when genetic disorders can occurs?'
2025-11-03 15:29:56,706 - INFO - Calling Ollama (streaming) at http://localhost:11434/api/generate
2025-11-03 15:31:14,154 - INFO - Raw LLM output length: 248
2025-11-03 15:31:14,155 - INFO - Reasoning completed for query 'Previous context:
[MEMORY 0] Q: when genetic disorders can occurs? | A: Genetic disorders can occur when there is a mutation in DNA.

New Query:
who is John Smith's doctor?'
2025-11-03 15:34:32,281 - INFO - ReasoningAgent initialized (model=llama3.1:latest, url=http://localhost:11434/api/generate)
2025-11-03 15:36:11,927 - INFO - Calling Ollama (streaming) at http://localhost:11434/api/generate
2025-11-03 15:37:02,751 - INFO - Raw LLM output length: 345
2025-11-03 15:37:02,751 - INFO - Reasoning completed for query 'what is drug prescriptions?'
